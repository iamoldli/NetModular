(window.webpackJsonp=window.webpackJsonp||[]).push([["admin.menu"],{"00b4":function(e,t,o){},"0b99":function(e,t,o){},"10a5":function(e,t,o){"use strict";var r=o("00b4");o.n(r).a},"1f8c":function(e,t,o){"use strict";var r=o("0b99");o.n(r).a},"29c0":function(e,t,o){"use strict";o.r(t);var r=o("2f62"),l=o("440a"),n=[{name:"id",label:"编号",show:!1},{name:"name",label:"名称",sortable:!0,width:"150"},{name:"typeName",label:"类型"},{name:"routeName",label:"路由名称",width:"150"},{name:"icon",label:"图标"},{name:"iconColor",label:"图标颜色"},{name:"level",label:"等级"},{name:"show",label:"是否显示"},{name:"sort",label:"排序"},{name:"targetName",label:"打开方式"}],s=o("3ee3"),a={data:function(){return{form:{noLoading:!0,action:$api.admin.menu.add,model:{moduleCode:"",parentId:"",type:0,name:"",routeName:"",routeParams:"",routeQuery:"",icon:"",iconColor:"",url:"",show:!0,target:0,dialogWidth:"",dialogHeight:"",dialogFullscreen:!0,sort:0,remarks:""},rules:{name:[{required:!0,message:"请输入菜单名称"}]}},on:{success:this.onSuccess,error:this.onError,"validate-error":this.onValidateError}}},props:["parent","sort"],methods:{submit:function(){this.submitBefore&&this.submitBefore(),this.$refs.form.submit()},reset:function(){var e=this;this.$nextTick(function(){e.$refs.form.reset(),e.setProps()})},setProps:function(){this.form.model.parentId=this.parent.id,this.form.model.sort=this.sort},onSuccess:function(){this.$emit("success")},onError:function(){this.$emit("error")},onValidateError:function(){this.$emit("validate-error")}}},i={mixins:[a]},m=o("2877"),c=Object(m.a)(i,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("nm-form",t._g(t._b({ref:"form"},"nm-form",t.form,!1),t.on),[o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"父节点"}},[o("el-input",{attrs:{disabled:""},model:{value:t.parent.path,callback:function(e){t.$set(t.parent,"path",e)},expression:"parent.path"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"菜单名称：",prop:"name"}},[o("el-input",{model:{value:t.form.model.name,callback:function(e){t.$set(t.form.model,"name",e)},expression:"form.model.name"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"图标：",prop:"icon"}},[o("nm-icon-picker",{model:{value:t.form.model.icon,callback:function(e){t.$set(t.form.model,"icon",e)},expression:"form.model.icon"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"图标颜色：",prop:"iconColor"}},[o("nm-color-picker",{model:{value:t.form.model.iconColor,callback:function(e){t.$set(t.form.model,"iconColor",e)},expression:"form.model.iconColor"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"排序：",prop:"sort"}},[o("el-input",{model:{value:t.form.model.sort,callback:function(e){t.$set(t.form.model,"sort",e)},expression:"form.model.sort"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"显示：",prop:"show"}},[o("el-switch",{model:{value:t.form.model.show,callback:function(e){t.$set(t.form.model,"show",e)},expression:"form.model.show"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:20,offset:2}},[o("el-form-item",{attrs:{label:"备注：",prop:"remarks"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.form.model.remarks,callback:function(e){t.$set(t.form.model,"remarks",e)},expression:"form.model.remarks"}})],1)],1)],1)],1)},[],!1,null,null,null).exports,u=o("354f"),f={mixins:[a],components:{ModuleInfoSelect:u.a},data:function(){return{form:{model:{type:1,permissions:[],buttons:[]},rules:{moduleCode:[{required:!0,message:"请选择模块"}],routeName:[{required:!0,message:"请选择路由名称"}]}}}},computed:{routes:function(){var t=[],o=this.form.model.moduleCode;return o&&this.$router.options.routes.forEach(function(e){e&&e.name&&e.name.toLowerCase().startsWith(o.toLowerCase())&&t.push({name:e.meta.title,icon:e.meta.icon||"",code:e.name.toLowerCase(),permissions:e.meta.permissions,buttons:e.meta.buttons})}),t}},methods:{submitBefore:function(){for(var e=this,t=function(){var t=e.routes[r],o=e.form.model;if(t.code===o.routeName)return o.routeName=t.code,o.permissions=t.permissions,o.buttons=[],t.buttons&&Object.keys(t.buttons).map(function(e){o.buttons.push(t.buttons[e])}),"break"},r=0;r<this.routes.length;r++){if("break"===t())break}},onRouteChange:function(e){for(var t=0;t<this.routes.length;t++){var o=this.routes[t];if(o.code===e){this.form.model.name=o.name,this.form.model.routeName=o.code,this.form.model.icon=o.icon;break}}}}},d=Object(m.a)(f,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("nm-form",t._g(t._b({ref:"form"},"nm-form",t.form,!1),t.on),[o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:20,offset:2}},[o("el-form-item",{attrs:{label:"父节点"}},[o("el-input",{attrs:{disabled:""},model:{value:t.parent.path,callback:function(e){t.$set(t.parent,"path",e)},expression:"parent.path"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"所属模块：",prop:"moduleCode"}},[o("module-info-select",{model:{value:t.form.model.moduleCode,callback:function(e){t.$set(t.form.model,"moduleCode",e)},expression:"form.model.moduleCode"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"选择路由：",prop:"route"}},[o("el-select",{attrs:{placeholder:"请选择"},on:{change:t.onRouteChange},model:{value:t.form.model.routeName,callback:function(e){t.$set(t.form.model,"routeName",e)},expression:"form.model.routeName"}},t._l(t.routes,function(e){return o("el-option",{key:e.code,attrs:{label:e.name,value:e.code}},[o("span",[t._v(t._s(e.name)+"("+t._s(e.code)+")")])])}),1)],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"菜单名称：",prop:"name"}},[o("el-input",{model:{value:t.form.model.name,callback:function(e){t.$set(t.form.model,"name",e)},expression:"form.model.name"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"路由名称：",prop:"routeName"}},[o("el-input",{attrs:{disabled:""},model:{value:t.form.model.routeName,callback:function(e){t.$set(t.form.model,"routeName",e)},expression:"form.model.routeName"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"路由参数：",prop:"routeParams"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"params"},model:{value:t.form.model.routeParams,callback:function(e){t.$set(t.form.model,"routeParams",e)},expression:"form.model.routeParams"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"路由参数：",prop:"routeQuery"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"query"},model:{value:t.form.model.routeQuery,callback:function(e){t.$set(t.form.model,"routeQuery",e)},expression:"form.model.routeQuery"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"图标：",prop:"icon"}},[o("nm-icon-picker",{model:{value:t.form.model.icon,callback:function(e){t.$set(t.form.model,"icon",e)},expression:"form.model.icon"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"图标颜色：",prop:"iconColor"}},[o("nm-color-picker",{model:{value:t.form.model.iconColor,callback:function(e){t.$set(t.form.model,"iconColor",e)},expression:"form.model.iconColor"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"排序：",prop:"sort"}},[o("el-input",{model:{value:t.form.model.sort,callback:function(e){t.$set(t.form.model,"sort",e)},expression:"form.model.sort"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"显示：",prop:"show"}},[o("el-switch",{model:{value:t.form.model.show,callback:function(e){t.$set(t.form.model,"show",e)},expression:"form.model.show"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:20,offset:2}},[o("el-form-item",{attrs:{label:"备注：",prop:"remarks"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.form.model.remarks,callback:function(e){t.$set(t.form.model,"remarks",e)},expression:"form.model.remarks"}})],1)],1)],1)],1)},[],!1,null,null,null).exports,p={mixins:[s.b.select],data:function(){return{action:$api.admin.menu.getTargetSelect}}},h=Object(m.a)(p,void 0,void 0,!1,null,null,null).exports,b={mixins:[a],components:{TargetSelect:h},data:function(){return{route:"",form:{model:{type:2},rules:{url:[{type:"url",message:"请输入正确的链接格式"}]}}}},computed:{dialogTarget:function(){return 2===this.form.model.target}}},g=Object(m.a)(b,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("nm-form",t._g(t._b({ref:"form"},"nm-form",t.form,!1),t.on),[o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:20,offset:2}},[o("el-form-item",{attrs:{label:"父节点"}},[o("el-input",{attrs:{disabled:""},model:{value:t.parent.path,callback:function(e){t.$set(t.parent,"path",e)},expression:"parent.path"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"菜单名称：",prop:"name"}},[o("el-input",{model:{value:t.form.model.name,callback:function(e){t.$set(t.form.model,"name",e)},expression:"form.model.name"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"链接：",prop:"url"}},[o("el-input",{model:{value:t.form.model.url,callback:function(e){t.$set(t.form.model,"url",e)},expression:"form.model.url"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"图标：",prop:"icon"}},[o("nm-icon-picker",{model:{value:t.form.model.icon,callback:function(e){t.$set(t.form.model,"icon",e)},expression:"form.model.icon"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"图标颜色：",prop:"iconColor"}},[o("nm-color-picker",{model:{value:t.form.model.iconColor,callback:function(e){t.$set(t.form.model,"iconColor",e)},expression:"form.model.iconColor"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"打开方式：",prop:"target"}},[o("target-select",{model:{value:t.form.model.target,callback:function(e){t.$set(t.form.model,"target",e)},expression:"form.model.target"}})],1)],1)],1),o("div",{directives:[{name:"show",rawName:"v-show",value:t.dialogTarget,expression:"dialogTarget"}]},[o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"宽度：",prop:"dialogWidth"}},[o("el-input",{attrs:{placeholder:"默认 60%"},model:{value:t.form.model.dialogWidth,callback:function(e){t.$set(t.form.model,"dialogWidth",e)},expression:"form.model.dialogWidth"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"高度：",prop:"dialogHeight"}},[o("el-input",{attrs:{placeholder:"默认 70%"},model:{value:t.form.model.dialogHeight,callback:function(e){t.$set(t.form.model,"dialogHeight",e)},expression:"form.model.dialogHeight"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"可全屏：",prop:"dialogFullscreen"}},[o("el-switch",{model:{value:t.form.model.dialogFullscreen,callback:function(e){t.$set(t.form.model,"dialogFullscreen",e)},expression:"form.model.dialogFullscreen"}})],1)],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"排序：",prop:"sort"}},[o("el-input",{model:{value:t.form.model.sort,callback:function(e){t.$set(t.form.model,"sort",e)},expression:"form.model.sort"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"显示：",prop:"show"}},[o("el-switch",{model:{value:t.form.model.show,callback:function(e){t.$set(t.form.model,"show",e)},expression:"form.model.show"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:20,offset:2}},[o("el-form-item",{attrs:{label:"备注：",prop:"remarks"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.form.model.remarks,callback:function(e){t.$set(t.form.model,"remarks",e)},expression:"form.model.remarks"}})],1)],1)],1)],1)},[],!1,null,null,null).exports,v={mixins:[s.b.dialog],components:{NodeMenu:c,RouteMenu:d,LinkMenu:g},data:function(){return{tab:"node",dialog:{footer:!0,title:"添加菜单",icon:"add",width:"60%",class:"nm-admin-menu-add",loading:!1},on:{success:this.onSuccess,error:this.onError,"validate-error":this.onValidateError}}},props:["parent","sort"],methods:{onSubmit:function(){this.dialog.loading=!0,this.$refs[this.tab].submit()},onReset:function(){var e=this;this.$nextTick(function(){e.$refs[e.tab].reset()})},setProps:function(){this.$refs[this.tab].setProps()},onSuccess:function(){this.dialog.loading=!1,this.$emit("success")},onError:function(){this.dialog.loading=!1},onValidateError:function(){this.dialog.loading=!1},onOpen:function(){this.onReset()}}},k=(o("10a5"),Object(m.a)(v,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("nm-dialog",t._b({attrs:{visible:t.visible_},on:{open:t.onOpen,"update:visible":function(e){t.visible_=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[o("nm-button",{attrs:{text:"添加",type:"success"},on:{click:t.onSubmit}}),o("nm-button",{attrs:{text:"重置",type:"info"},on:{click:t.onReset}})]},proxy:!0}])},"nm-dialog",t.dialog,!1),[o("el-tabs",{staticClass:"nm-dialog-tabs",attrs:{type:"card"},on:{"tab-click":t.setProps},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[o("el-tab-pane",{attrs:{name:"node"}},[o("span",{attrs:{slot:"label"},slot:"label"},[o("nm-icon",{attrs:{name:"node"}}),t._v("节点\n      ")],1),o("node-menu",t._g({ref:"node",attrs:{parent:t.parent,sort:t.sort}},t.on))],1),o("el-tab-pane",{attrs:{name:"route"}},[o("span",{attrs:{slot:"label"},slot:"label"},[o("nm-icon",{attrs:{name:"link"}}),t._v("路由菜单\n      ")],1),o("route-menu",t._g({ref:"route",attrs:{parent:t.parent,sort:t.sort}},t.on))],1),o("el-tab-pane",{attrs:{name:"link"}},[o("span",{attrs:{slot:"label"},slot:"label"},[o("nm-icon",{attrs:{name:"transmit"}}),t._v("链接菜单\n      ")],1),o("link-menu",t._g({ref:"link",attrs:{parent:t.parent,sort:t.sort}},t.on))],1)],1)],1)},[],!1,null,null,null).exports),w=o("a34a"),y=o.n(w),x={data:function(){return{form:{noLoading:!0,action:$api.admin.menu.update,model:{moduleCode:"",parentId:"",type:0,name:"",routeName:"",routeParams:"",routeQuery:"",icon:"",iconColor:"",url:"",show:!0,target:0,dialogWidth:"",dialogHeight:"",dialogFullscreen:!0,sort:0,remarks:""},rules:{name:[{required:!0,message:"请输入菜单名称"}]}},on:{success:this.onSuccess,error:this.onError,"validate-error":this.onValidateError}}},props:["model","parent"],methods:{submit:function(){this.submitBefore&&this.submitBefore(),this.$refs.form.submit()},reset:function(){var e=this;this.$nextTick(function(){e.$refs.form.reset()})},setModel:function(){this.form.model=this.model},onSuccess:function(){this.$emit("success")},onError:function(){this.$emit("error")},onValidateError:function(){this.$emit("validate-error")}}},$={mixins:[x]},C=Object(m.a)($,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("nm-form",t._g(t._b({ref:"form"},"nm-form",t.form,!1),t.on),[o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"父节点"}},[o("el-input",{attrs:{disabled:""},model:{value:t.parent.path,callback:function(e){t.$set(t.parent,"path",e)},expression:"parent.path"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"菜单名称：",prop:"name"}},[o("el-input",{model:{value:t.form.model.name,callback:function(e){t.$set(t.form.model,"name",e)},expression:"form.model.name"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"图标：",prop:"icon"}},[o("nm-icon-picker",{model:{value:t.form.model.icon,callback:function(e){t.$set(t.form.model,"icon",e)},expression:"form.model.icon"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"图标颜色：",prop:"iconColor"}},[o("nm-color-picker",{model:{value:t.form.model.iconColor,callback:function(e){t.$set(t.form.model,"iconColor",e)},expression:"form.model.iconColor"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"排序：",prop:"sort"}},[o("el-input",{model:{value:t.form.model.sort,callback:function(e){t.$set(t.form.model,"sort",e)},expression:"form.model.sort"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"显示：",prop:"show"}},[o("el-switch",{model:{value:t.form.model.show,callback:function(e){t.$set(t.form.model,"show",e)},expression:"form.model.show"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:20,offset:2}},[o("el-form-item",{attrs:{label:"备注：",prop:"remarks"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.form.model.remarks,callback:function(e){t.$set(t.form.model,"remarks",e)},expression:"form.model.remarks"}})],1)],1)],1)],1)},[],!1,null,null,null).exports,_={mixins:[x],components:{ModuleInfoSelect:u.a},data:function(){return{form:{model:{type:1,permissions:[],buttons:[]},rules:{moduleCode:[{required:!0,message:"请选择模块"}],routeName:[{required:!0,message:"请选择路由名称"}]}}}},computed:{routes:function(){var t=[],o=this.form.model.moduleCode;return o&&this.$router.options.routes.forEach(function(e){e&&e.name&&e.name.toLowerCase().startsWith(o.toLowerCase())&&t.push({name:e.meta.title,code:e.name.toLowerCase(),permissions:e.meta.permissions,buttons:e.meta.buttons})}),t}},methods:{submitBefore:function(){for(var e=this,t=function(){var t=e.routes[r],o=e.form.model;if(t.code===o.routeName)return o.routeName=t.code,o.permissions=t.permissions,o.buttons=[],t.buttons&&Object.keys(t.buttons).map(function(e){o.buttons.push(t.buttons[e])}),"break"},r=0;r<this.routes.length;r++){if("break"===t())break}},onRouteChange:function(e){for(var t=0;t<this.routes.length;t++){var o=this.routes[t];if(o.code===e){this.form.model.name=o.name,this.form.model.routeName=o.code;break}}}}},O=Object(m.a)(_,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("nm-form",t._g(t._b({ref:"form"},"nm-form",t.form,!1),t.on),[o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:20,offset:2}},[o("el-form-item",{attrs:{label:"父节点"}},[o("el-input",{attrs:{disabled:""},model:{value:t.parent.path,callback:function(e){t.$set(t.parent,"path",e)},expression:"parent.path"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"所属模块：",prop:"moduleCode"}},[o("module-info-select",{model:{value:t.form.model.moduleCode,callback:function(e){t.$set(t.form.model,"moduleCode",e)},expression:"form.model.moduleCode"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"选择路由",prop:"route"}},[o("el-select",{attrs:{placeholder:"请选择"},on:{change:t.onRouteChange},model:{value:t.form.model.routeName,callback:function(e){t.$set(t.form.model,"routeName",e)},expression:"form.model.routeName"}},t._l(t.routes,function(e){return o("el-option",{key:e.code,attrs:{label:e.name,value:e.code}},[o("span",[t._v(t._s(e.name)+"("+t._s(e.code)+")")])])}),1)],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"菜单名称：",prop:"name"}},[o("el-input",{model:{value:t.form.model.name,callback:function(e){t.$set(t.form.model,"name",e)},expression:"form.model.name"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"路由名称：",prop:"routeName"}},[o("el-input",{attrs:{disabled:""},model:{value:t.form.model.routeName,callback:function(e){t.$set(t.form.model,"routeName",e)},expression:"form.model.routeName"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"路由参数：",prop:"routeParams"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"params"},model:{value:t.form.model.routeParams,callback:function(e){t.$set(t.form.model,"routeParams",e)},expression:"form.model.routeParams"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"路由参数：",prop:"routeQuery"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"query"},model:{value:t.form.model.routeQuery,callback:function(e){t.$set(t.form.model,"routeQuery",e)},expression:"form.model.routeQuery"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"图标：",prop:"icon"}},[o("nm-icon-picker",{model:{value:t.form.model.icon,callback:function(e){t.$set(t.form.model,"icon",e)},expression:"form.model.icon"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"图标颜色：",prop:"iconColor"}},[o("nm-color-picker",{model:{value:t.form.model.iconColor,callback:function(e){t.$set(t.form.model,"iconColor",e)},expression:"form.model.iconColor"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"排序：",prop:"sort"}},[o("el-input",{model:{value:t.form.model.sort,callback:function(e){t.$set(t.form.model,"sort",e)},expression:"form.model.sort"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"显示：",prop:"show"}},[o("el-switch",{model:{value:t.form.model.show,callback:function(e){t.$set(t.form.model,"show",e)},expression:"form.model.show"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:20,offset:2}},[o("el-form-item",{attrs:{label:"备注：",prop:"remarks"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.form.model.remarks,callback:function(e){t.$set(t.form.model,"remarks",e)},expression:"form.model.remarks"}})],1)],1)],1)],1)},[],!1,null,null,null).exports,P={mixins:[x],components:{TargetSelect:h},data:function(){return{route:"",form:{model:{type:2},rules:{url:[{type:"url",message:"请输入正确的链接格式"}]}}}},computed:{dialogTarget:function(){return 2===this.form.model.target}}},S=Object(m.a)(P,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("nm-form",t._g(t._b({ref:"form"},"nm-form",t.form,!1),t.on),[o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:20,offset:2}},[o("el-form-item",{attrs:{label:"父节点"}},[o("el-input",{attrs:{disabled:""},model:{value:t.parent.path,callback:function(e){t.$set(t.parent,"path",e)},expression:"parent.path"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"菜单名称：",prop:"name"}},[o("el-input",{model:{value:t.form.model.name,callback:function(e){t.$set(t.form.model,"name",e)},expression:"form.model.name"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"链接：",prop:"url"}},[o("el-input",{model:{value:t.form.model.url,callback:function(e){t.$set(t.form.model,"url",e)},expression:"form.model.url"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"图标：",prop:"icon"}},[o("nm-icon-picker",{model:{value:t.form.model.icon,callback:function(e){t.$set(t.form.model,"icon",e)},expression:"form.model.icon"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"图标颜色：",prop:"iconColor"}},[o("nm-color-picker",{model:{value:t.form.model.iconColor,callback:function(e){t.$set(t.form.model,"iconColor",e)},expression:"form.model.iconColor"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"打开方式：",prop:"target"}},[o("target-select",{model:{value:t.form.model.target,callback:function(e){t.$set(t.form.model,"target",e)},expression:"form.model.target"}})],1)],1)],1),o("div",{directives:[{name:"show",rawName:"v-show",value:t.dialogTarget,expression:"dialogTarget"}]},[o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"宽度：",prop:"dialogWidth"}},[o("el-input",{attrs:{placeholder:"默认 60%"},model:{value:t.form.model.dialogWidth,callback:function(e){t.$set(t.form.model,"dialogWidth",e)},expression:"form.model.dialogWidth"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"高度：",prop:"dialogHeight"}},[o("el-input",{attrs:{placeholder:"默认 70%"},model:{value:t.form.model.dialogHeight,callback:function(e){t.$set(t.form.model,"dialogHeight",e)},expression:"form.model.dialogHeight"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"可全屏：",prop:"dialogFullscreen"}},[o("el-switch",{model:{value:t.form.model.dialogFullscreen,callback:function(e){t.$set(t.form.model,"dialogFullscreen",e)},expression:"form.model.dialogFullscreen"}})],1)],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"排序：",prop:"sort"}},[o("el-input",{model:{value:t.form.model.sort,callback:function(e){t.$set(t.form.model,"sort",e)},expression:"form.model.sort"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"显示：",prop:"show"}},[o("el-switch",{model:{value:t.form.model.show,callback:function(e){t.$set(t.form.model,"show",e)},expression:"form.model.show"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:20,offset:2}},[o("el-form-item",{attrs:{label:"备注：",prop:"remarks"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.form.model.remarks,callback:function(e){t.$set(t.form.model,"remarks",e)},expression:"form.model.remarks"}})],1)],1)],1)],1)},[],!1,null,null,null).exports;function j(e,t,o,r,l,n,s){try{var a=e[n](s),i=a.value}catch(e){return void o(e)}a.done?t(i):Promise.resolve(i).then(r,l)}var N,E=$api.admin.menu,T={mixins:[s.b.dialog],components:{NodeMenu:C,RouteMenu:O,LinkMenu:S},data:function(){return{model:{type:0},dialog:{footer:!0,title:"编辑菜单",icon:"add",width:"60%",class:"nm-admin-menu-edit",loading:!1},on:{success:this.onSuccess,error:this.onError,"validate-error":this.onValidateError}}},props:["parent","id"],methods:{edit:(N=function(a){return function(){var e=this,s=arguments;return new Promise(function(t,o){var r=a.apply(e,s);function l(e){j(r,t,o,l,n,"next",e)}function n(e){j(r,t,o,l,n,"throw",e)}l(void 0)})}}(y.a.mark(function e(){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""===this.id)return this._warning("请选择要编辑的菜单~"),e.abrupt("return");e.next=3;break;case 3:return this.dialog.loading=!0,e.next=6,E.edit(this.id);case 6:this.model=e.sent,this.setModel(),this.dialog.loading=!1;case 9:case"end":return e.stop()}},e,this)})),function(){return N.apply(this,arguments)}),onOpen:function(){this.edit()},onSubmit:function(){this.dialog.loading=!0,this.getModel().submit()},onReset:function(){var e=this;this.$nextTick(function(){e.getModel().reset()})},onSuccess:function(){this.dialog.loading=!1,this.$emit("success")},onError:function(){this.dialog.loading=!1},onValidateError:function(){this.dialog.loading=!1},setModel:function(){var e=this;this.$nextTick(function(){e.getModel().setModel()})},getModel:function(){return 0===this.model.type?this.$refs.node:1===this.model.type?this.$refs.route:this.$refs.link}}},M=Object(m.a)(T,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("nm-dialog",t._b({attrs:{visible:t.visible_},on:{open:t.onOpen,"update:visible":function(e){t.visible_=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[o("nm-button",{attrs:{text:"保存",type:"success"},on:{click:t.onSubmit}}),o("nm-button",{attrs:{text:"重置",type:"info"},on:{click:t.onReset}})]},proxy:!0}])},"nm-dialog",t.dialog,!1),[0===t.model.type?o("node-menu",t._g({ref:"node",attrs:{model:t.model,parent:t.parent}},t.on)):1===t.model.type?o("route-menu",t._g({ref:"route",attrs:{model:t.model,parent:t.parent}},t.on)):o("link-menu",t._g({ref:"link",attrs:{model:t.model,parent:t.parent}},t.on))],1)},[],!1,null,null,null).exports,L=o("cf13");function I(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,r)}return o}function q(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var V=$api.admin.menu,F={name:l.default.name,components:{MenuTree:L.a,AddPage:k,EditPage:M},data:function(){return{split:.2,list:{cols:n,action:V.query,labelWidth:"60px",model:{parentId:"",name:"",code:""}},remove:V.remove,total:0,dialog:{add:!1,edit:!1,sort:!1},currentMenu:{},menu:{id:"",name:"",path:""},buttons:l.default.buttons}},computed:{title:function(){return"菜单列表—"+this.menu.name},dragSort:function(){return{queryAction:this.querySortList,updateAction:V.updateSortList}}},methods:function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?I(o,!0).forEach(function(e){q(t,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):I(o).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}({},Object(r.d)("module/admin",["setCurrentMenu"]),{refresh:function(e){this.list.model.parentId=this.menu.id,this.$refs.list.refresh(),e&&this.refreshTree()},refreshTree:function(){this.$refs.tree.refresh()},onTreeSelectChange:function(e){var t=e.menu,o=e.path;this.menu.id=t.id,this.menu.name=t.name,this.menu.path=o,this.refresh()},add:function(e){this.total=e,this.dialog.add=!0},edit:function(e){this.currentMenu=e,this.dialog.edit=!0},querySortList:function(){return V.querySortList(this.menu.id)},openSort:function(){this.dialog.sort=!0}})},W=Object(m.a)(F,function(){var o=this,e=o.$createElement,r=o._self._c||e;return r("nm-container",[r("nm-split",{scopedSlots:o._u([{key:"left",fn:function(){return[r("nm-box",{attrs:{page:"",header:"",title:"菜单树",type:"success",icon:"menu",toolbar:null}},[r("menu-tree",{ref:"tree",on:{"select-change":o.onTreeSelectChange}})],1)]},proxy:!0},{key:"right",fn:function(){return[r("nm-list",o._b({ref:"list",attrs:{title:o.title},scopedSlots:o._u([{key:"querybar",fn:function(){return[r("el-form-item",{attrs:{label:"名称：",prop:"name"}},[r("el-input",{attrs:{clearable:""},model:{value:o.list.model.name,callback:function(e){o.$set(o.list.model,"name",e)},expression:"list.model.name"}})],1),r("el-form-item",{attrs:{label:"编码：",prop:"code"}},[r("el-input",{attrs:{clearable:""},model:{value:o.list.model.code,callback:function(e){o.$set(o.list.model,"code",e)},expression:"list.model.code"}})],1)]},proxy:!0},{key:"querybar-buttons",fn:function(e){var t=e.total;return[r("nm-button-has",{attrs:{options:o.buttons.add},on:{click:function(e){return o.add(t)}}}),r("nm-button-has",{attrs:{options:o.buttons.sort},on:{click:o.openSort}})]}},{key:"col-typeName",fn:function(e){var t=e.row;return[0===t.type?r("el-tag",{attrs:{type:"success"}},[o._v(o._s(t.typeName))]):o._e(),1===t.type?r("el-tag",{attrs:{type:"warning"}},[o._v(o._s(t.typeName))]):o._e(),2===t.type?r("el-tag",[o._v(o._s(t.typeName))]):o._e()]}},{key:"col-icon",fn:function(e){var t=e.row;return[t.icon?r("el-tooltip",{attrs:{content:t.icon,effect:"dark",placement:"right"}},[r("label",[r("nm-icon",{attrs:{name:t.icon,size:"20px"}})],1)]):r("label",[o._v("无")])]}},{key:"col-show",fn:function(e){var t=e.row;return[o._v(o._s(t.show?"是":"否"))]}},{key:"col-operation",fn:function(e){var t=e.row;return[r("el-dropdown",{attrs:{trigger:"click"}},[r("span",{staticClass:"el-dropdown-link"},[o._v("\n              操作\n              "),r("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),r("el-dropdown-menu",{staticClass:"nm-list-operation-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",[r("nm-button-has",{attrs:{options:o.buttons.edit},on:{click:function(e){return o.edit(t)}}})],1),r("el-dropdown-item",[r("nm-button-delete",{attrs:{options:o.buttons.del,action:o.remove,id:t.id},on:{success:function(e){return o.refresh(!0)}}})],1)],1)],1)]}}])},"nm-list",o.list,!1))]},proxy:!0}]),model:{value:o.split,callback:function(e){o.split=e},expression:"split"}}),r("add-page",{attrs:{parent:o.menu,sort:o.total,visible:o.dialog.add},on:{"update:visible":function(e){return o.$set(o.dialog,"add",e)},success:function(e){return o.refresh(!0)}}}),r("edit-page",{attrs:{parent:o.menu,id:o.currentMenu.id,visible:o.dialog.edit},on:{"update:visible":function(e){return o.$set(o.dialog,"edit",e)},success:function(e){return o.refresh(!0)}}}),r("nm-drag-sort-dialog",o._b({attrs:{visible:o.dialog.sort},on:{"update:visible":function(e){return o.$set(o.dialog,"sort",e)},success:function(e){return o.refresh(!0)}}},"nm-drag-sort-dialog",o.dragSort,!1))],1)},[],!1,null,null,null);t.default=W.exports},"354f":function(e,t,o){"use strict";var r={mixins:[o("3ee3").b.select],data:function(){return{action:$api.admin.moduleInfo.select}}},l=o("2877"),n=Object(l.a)(r,void 0,void 0,!1,null,null,null);t.a=n.exports},b1ac:function(e,t,o){},cdb7:function(e,t,o){"use strict";o.r(t);var r=o("2f62"),l=o("f088");function n(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,r)}return o}function s(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var a=$api.admin.system,i={name:l.default.name,data:function(){return{form:{title:l.default.title,icon:"system",successMsg:!1,btnReset:!1,action:a.updateConfig,model:{title:"",logo:"",logoUrl:"",home:"",userInfoPage:"",buttonPermission:!1,permissionValidate:!1,auditing:!1,loginVerifyCode:!1,toolbar:{fullscreen:!1,skin:!1,logout:!1,userInfo:!1},customCss:""}}}},computed:function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?n(o,!0).forEach(function(e){s(t,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):n(o).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}({},Object(r.e)("app/token",["accessToken"]),{logoUpload:function(){return{action:a.uploadLogoUrl(),headers:{Authorization:"Bearer "+this.accessToken},"show-file-list":!1,"before-upload":this.beforeLogoUpload,"on-success":this.handleLogoSuccess}}}),methods:{query:function(){var t=this;a.getConfig().then(function(e){t.form.model=e,t.form.model.logoUrl||(t.form.model.logoUrl="./images/logo.png")})},onSuccess:function(){this._confirm("需要刷新页面才可看到修改后的效果，是否刷新页面？","修改成功","success").then(function(){window.location.reload()})},beforeLogoUpload:function(e){return"image/jpeg"!==e.type&&"image/png"!==e.type?(this._error("上传Logo图片只能是 JPG/PNG 格式!"),!1):!(512<e.size/1024)||(this._error("上传Logo图片大小不能超过 500KB!"),!1)},handleLogoSuccess:function(e){1===e.code&&(this.form.model.logo=e.data.fullPath,this.form.model.logoUrl=e.data.url)}},created:function(){this.query()},activated:function(){this.query()}},m=(o("e128"),o("2877")),c=Object(m.a)(i,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("nm-container",[o("nm-form-page",t._b({ref:"form",on:{success:t.onSuccess}},"nm-form-page",t.form,!1),[o("el-divider",{attrs:{"content-position":"left"}},[t._v("基础信息")]),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:10,offset:1}},[o("el-form-item",{attrs:{label:"标题：",prop:"title"}},[o("el-input",{model:{value:t.form.model.title,callback:function(e){t.$set(t.form.model,"title",e)},expression:"form.model.title"}})],1),o("el-form-item",{attrs:{label:"首页：",prop:"home"}},[o("el-input",{model:{value:t.form.model.home,callback:function(e){t.$set(t.form.model,"home",e)},expression:"form.model.home"}})],1)],1),o("el-col",{attrs:{span:10,offset:1}},[o("el-form-item",{attrs:{label:"Logo：",prop:"logo"}},[o("el-upload",t._b({staticClass:"logo-uploader"},"el-upload",t.logoUpload,!1),[t.form.model.logoUrl?o("img",{staticClass:"logo-uploader-img",attrs:{src:t.form.model.logoUrl}}):o("i",{staticClass:"el-icon-plus logo-uploader-icon"})])],1)],1)],1),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:10,offset:1}},[o("el-form-item",{attrs:{label:"个人信息页：",prop:"userInfoPage"}},[o("el-input",{model:{value:t.form.model.userInfoPage,callback:function(e){t.$set(t.form.model,"userInfoPage",e)},expression:"form.model.userInfoPage"}})],1)],1)],1),o("el-divider",{attrs:{"content-position":"left"}},[t._v("登录控制")]),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:5,offset:1}},[o("el-form-item",{attrs:{label:"启用验证码：",prop:"loginVerifyCode"}},[o("el-switch",{model:{value:t.form.model.loginVerifyCode,callback:function(e){t.$set(t.form.model,"loginVerifyCode",e)},expression:"form.model.loginVerifyCode"}})],1)],1)],1),o("el-divider",{attrs:{"content-position":"left"}},[t._v("工具栏")]),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:5,offset:1}},[o("el-form-item",{attrs:{label:"全屏控制：",prop:"toolbar.fullscreen"}},[o("el-switch",{model:{value:t.form.model.toolbar.fullscreen,callback:function(e){t.$set(t.form.model.toolbar,"fullscreen",e)},expression:"form.model.toolbar.fullscreen"}})],1)],1),o("el-col",{attrs:{span:5}},[o("el-form-item",{attrs:{label:"皮肤设置：",prop:"toolbar.skin"}},[o("el-switch",{model:{value:t.form.model.toolbar.skin,callback:function(e){t.$set(t.form.model.toolbar,"skin",e)},expression:"form.model.toolbar.skin"}})],1)],1),o("el-col",{attrs:{span:5}},[o("el-form-item",{attrs:{label:"退出按钮：",prop:"toolbar.logout"}},[o("el-switch",{model:{value:t.form.model.toolbar.logout,callback:function(e){t.$set(t.form.model.toolbar,"logout",e)},expression:"form.model.toolbar.logout"}})],1)],1),o("el-col",{attrs:{span:5}},[o("el-form-item",{attrs:{label:"用户信息：",prop:"toolbar.userInfo"}},[o("el-switch",{model:{value:t.form.model.toolbar.userInfo,callback:function(e){t.$set(t.form.model.toolbar,"userInfo",e)},expression:"form.model.toolbar.userInfo"}})],1)],1)],1),o("el-divider",{attrs:{"content-position":"left"}},[t._v("自定义CSS")]),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:24}},[o("el-form-item",{attrs:{prop:"customCss"}},[o("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入自定义Css"},model:{value:t.form.model.customCss,callback:function(e){t.$set(t.form.model,"customCss",e)},expression:"form.model.customCss"}})],1)],1)],1),o("el-divider",{attrs:{"content-position":"left"}},[t._v("开发属性")]),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:5,offset:1}},[o("el-form-item",{attrs:{label:"权限验证：",prop:"permissionValidate"}},[o("el-switch",{model:{value:t.form.model.permissionValidate,callback:function(e){t.$set(t.form.model,"permissionValidate",e)},expression:"form.model.permissionValidate"}})],1)],1),o("el-col",{attrs:{span:5,offset:1}},[o("el-form-item",{attrs:{label:"按钮权限：",prop:"buttonPermission"}},[o("el-switch",{model:{value:t.form.model.buttonPermission,callback:function(e){t.$set(t.form.model,"buttonPermission",e)},expression:"form.model.buttonPermission"}})],1)],1),o("el-col",{attrs:{span:5}},[o("el-form-item",{attrs:{label:"审计日志：",prop:"auditing"}},[o("el-switch",{model:{value:t.form.model.auditing,callback:function(e){t.$set(t.form.model,"auditing",e)},expression:"form.model.auditing"}})],1)],1)],1)],1)],1)},[],!1,null,null,null);t.default=c.exports},cf13:function(e,t,o){"use strict";var r=o("2f62");function l(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,r)}return o}function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var s={data:function(){return{tree:[],menus:[],current:{id:this.value||"",checked:!1,menu:null,node:null,path:""}}},props:{value:String,showCheckbox:Boolean,showIcon:{type:Boolean,default:!0},checkedKeys:Array,pathSeparator:{type:String,default:"/"}},computed:function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?l(o,!0).forEach(function(e){n(t,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):l(o).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}({},Object(r.e)("app/system",{systemTitle:"title"}),{rootMenu:function(){return{id:"",label:this.systemTitle,children:[],menu:{id:"",name:this.systemTitle,icon:"system"}}}}),methods:{refresh:function(){var t=this;$api.admin.menu.getTree().then(function(e){t.rootMenu.children=t.menus2Tree(e),t.tree=[t.rootMenu],t.setCheckedKeys(),t.setCurrentKey()})},menus2Tree:function(e){var o=this,r=[];return 0<e.length&&e.map(function(e){e.icon=e.icon||"list";var t={id:e.id,label:e.name,menu:e};o.menus.push(e),0===e.type&&(t.children=o.menus2Tree(e.children)),r.push(t)}),r},setCurrentKey:function(e){var t=this;this.$nextTick(function(){t.$refs.tree.setCurrentKey(e||t.current.id)})},setCheckedKeys:function(){var e=this;this.checkedKeys&&this.$nextTick(function(){e.$refs.tree.setCheckedKeys(e.checkedKeys)})},onSelectChange:function(e,t){if(!this.current.id||e.menu.id!==this.current.id){this.current.id=e.menu.id,this.current.menu=e.menu;var o=this.getFullPath(t);o=o?o.substring(0,o.length-2):this.systemTitle,this.current.path=o,t&&(this.current.checked=t.checked,this.current.node=t),this.$emit("input",this.current.id),this.$emit("select-change",this.current)}},onCheck:function(e,t){var o=[];t.checkedNodes.map(function(e){e.menu.id&&o.push(e.menu)}),t.halfCheckedNodes.map(function(e){e.menu.id&&o.push(e.menu)}),this.$emit("check",o)},onCheckChange:function(e,t,o){this.$emit("check-change",e,t,o)},getFullPath:function(e,t){return t=t||"",e&&void 0!==e.key&&(t="".concat(e.label," ").concat(this.pathSeparator," ").concat(t),t=this.getFullPath(e.parent,t)),t}},mounted:function(){this.refresh(),this.onSelectChange(this.rootMenu,this.current.node)},watch:{checkedKeys:function(){this.setCheckedKeys()}}},a=(o("1f8c"),o("2877")),i=Object(a.a)(s,function(){var r=this,e=r.$createElement,l=r._self._c||e;return l("el-tree",{ref:"tree",staticClass:"nm-admin-menu-tree",attrs:{"node-key":"id","default-expand-all":"","highlight-current":"",data:r.tree,"show-checkbox":r.showCheckbox,"current-node-key":this.current.id,"expand-on-click-node":!1},on:{"current-change":r.onSelectChange,check:r.onCheck,"check-change":r.onCheckChange},scopedSlots:r._u([{key:"default",fn:function(e){var t=e.node,o=e.data;return l("div",{staticClass:"nm-menu-tree-node"},[l("div",{staticClass:"nm-menu-tree-node-label"},[r.showIcon?l("nm-icon",{attrs:{name:o.menu.icon}}):r._e(),r._v("\n      "+r._s(t.label)+"\n    ")],1)])}}])})},[],!1,null,null,null);t.a=i.exports},e128:function(e,t,o){"use strict";var r=o("b1ac");o.n(r).a}}]);