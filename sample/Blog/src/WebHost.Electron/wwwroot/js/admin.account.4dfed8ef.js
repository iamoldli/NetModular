(window.webpackJsonp=window.webpackJsonp||[]).push([["admin.account"],{8486:function(e,t,n){"use strict";var o=n("e0f9");function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r="admin/role/",s=o.b.crud(r),a={select:r+"select",menuList:r+"menulist",bindMenu:r+"bindmenu",menuButtonList:r+"MenuButtonList",bindMenuButton:r+"BindMenuButton"};t.a=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(e){l(t,e,n[e])})}return t}({},s,{select:function(){return o.b.get(a.select)},menuList:function(e){return o.b.get(a.menuList,{id:e})},bindMenu:function(e){return o.b.post(a.bindMenu,e)},menuButtonList:function(e){return o.b.get(a.menuButtonList,e)},bindMenuButton:function(e){return o.b.post(a.bindMenuButton,e)}})},"84ea":function(e,t,n){"use strict";n.r(t);var o=n("2f62"),l=n("d82a"),r=n("5c01"),s=[{name:"id",label:"编号",width:240,show:!1},{name:"name",label:"名称"},{name:"userName",label:"用户名",width:150},{name:"roles",label:"角色",width:300},{name:"phone",label:"手机号"},{name:"email",label:"邮箱",width:150},{name:"status",label:"状态",width:150},{name:"loginTime",label:"最后登录时间",width:150},{name:"loginIP",label:"最后登录IP",width:150}],a=n("3ee3"),i=n("8486"),m={mixins:[a.b.select],data:function(){return{action:i.a.select}}},u=n("2877"),c=Object(u.a)(m,void 0,void 0,!1,null,null,null).exports,d={mixins:[a.b.dialog],components:{RoleSelect:c},data:function(){return{form:{title:"添加账户",icon:"add",width:"500px",action:l.a.add,model:{name:"",roles:[],userName:"",password:"",phone:"",email:""},rules:{name:[{required:!0,message:"请输入名称"}],userName:[{required:!0,message:"请输入用户名"}],password:[{min:6,message:"密码长度不能小于6位"}],phone:[{len:11,message:"请输入正确的手机号"}],email:[{type:"email",message:"请输入正确的邮箱地址"}]}},on:{success:this.onSuccess,open:this.onOpen}}},methods:{onSuccess:function(){this.$emit("success")},onOpen:function(){var e=this;this.$nextTick(function(){e.$refs.roles.refresh(),e.$refs.form.reset()})}}},p=Object(u.a)(d,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nm-form-dialog",t._g(t._b({ref:"form",attrs:{visible:t.visible_},on:{"update:visible":function(e){t.visible_=e}}},"nm-form-dialog",t.form,!1),t.on),[n("el-row",[n("el-col",{attrs:{span:20,offset:1}},[n("el-form-item",{attrs:{label:"用户名：",prop:"userName"}},[n("el-input",{model:{value:t.form.model.userName,callback:function(e){t.$set(t.form.model,"userName",e)},expression:"form.model.userName"}})],1),n("el-form-item",{attrs:{label:"角色：",prop:"roles"}},[n("role-select",{ref:"roles",attrs:{multiple:"",clearable:!1},model:{value:t.form.model.roles,callback:function(e){t.$set(t.form.model,"roles",e)},expression:"form.model.roles"}})],1),n("el-form-item",{attrs:{label:"名称：",prop:"name"}},[n("el-input",{model:{value:t.form.model.name,callback:function(e){t.$set(t.form.model,"name",e)},expression:"form.model.name"}})],1),n("el-form-item",{attrs:{label:"密码：",prop:"password"}},[n("el-input",{attrs:{placeholder:"默认密码123456",clearable:""},model:{value:t.form.model.password,callback:function(e){t.$set(t.form.model,"password",e)},expression:"form.model.password"}})],1),n("el-form-item",{attrs:{label:"手机：",prop:"phone"}},[n("el-input",{attrs:{type:"number",clearable:""},model:{value:t.form.model.phone,callback:function(e){t.$set(t.form.model,"phone",e)},expression:"form.model.phone"}})],1),n("el-form-item",{attrs:{label:"邮箱：",prop:"email"}},[n("el-input",{attrs:{type:"email",clearable:""},model:{value:t.form.model.email,callback:function(e){t.$set(t.form.model,"email",e)},expression:"form.model.email"}})],1)],1)],1)],1)},[],!1,null,null,null).exports,f={components:{RoleSelect:c},mixins:[a.b.formDialogEdit],data:function(){return{api:l.a,form:{title:"编辑账户",width:"500px",action:l.a.update,model:{id:"",name:"",roles:[],userName:"",phone:"",email:""},rules:{name:[{required:!0,message:"请输入名称"}],userName:[{required:!0,message:"请输入用户名"}],password:[{min:6,message:"密码长度不能小于6位"}],phone:[{len:11,message:"请输入正确的手机号"}],email:[{type:"email",message:"请输入正确的邮箱地址"}]}}}}},b=Object(u.a)(f,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nm-form-dialog",t._g(t._b({ref:"form",attrs:{visible:t.visible_},on:{"update:visible":function(e){t.visible_=e}}},"nm-form-dialog",t.form,!1),t.on),[n("el-row",[n("el-col",{attrs:{span:20,offset:1}},[n("el-form-item",{attrs:{label:"用户名：",prop:"userName"}},[n("el-input",{model:{value:t.form.model.userName,callback:function(e){t.$set(t.form.model,"userName",e)},expression:"form.model.userName"}})],1),n("el-form-item",{attrs:{label:"角色：",prop:"roles"}},[n("role-select",{ref:"roles",attrs:{multiple:""},model:{value:t.form.model.roles,callback:function(e){t.$set(t.form.model,"roles",e)},expression:"form.model.roles"}})],1),n("el-form-item",{attrs:{label:"名称：",prop:"name"}},[n("el-input",{model:{value:t.form.model.name,callback:function(e){t.$set(t.form.model,"name",e)},expression:"form.model.name"}})],1),n("el-form-item",{attrs:{label:"密码：",prop:"password"}},[n("el-input",{attrs:{placeholder:"默认密码123456",clearable:""},model:{value:t.form.model.password,callback:function(e){t.$set(t.form.model,"password",e)},expression:"form.model.password"}})],1),n("el-form-item",{attrs:{label:"手机：",prop:"phone"}},[n("el-input",{attrs:{type:"number",clearable:""},model:{value:t.form.model.phone,callback:function(e){t.$set(t.form.model,"phone",e)},expression:"form.model.phone"}})],1),n("el-form-item",{attrs:{label:"邮箱：",prop:"email"}},[n("el-input",{attrs:{type:"email",clearable:""},model:{value:t.form.model.email,callback:function(e){t.$set(t.form.model,"email",e)},expression:"form.model.email"}})],1)],1)],1)],1)},[],!1,null,null,null).exports;function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h={name:r.default.name,components:{AddPage:p,EditPage:b},data:function(){return{list:{title:r.default.title,cols:s,action:l.a.query,advanced:{enabled:!0,width:"400px"},model:{userName:"",name:"",phone:"",email:""}},addPage:{visible:!1,sort:0},editPage:{visible:!1,id:""},removeAction:l.a.remove,buttons:r.default.buttons}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(e){v(t,e,n[e])})}return t}({},Object(o.e)("app/account",{accountId:"id"})),methods:{refresh:function(){this.$refs.list.refresh()},add:function(e){this.addPage.sort=e,this.addPage.visible=!0},edit:function(e){this.editPage={id:e.id,visible:!0}},resetPassword:function(e){var t=this;this._confirm("您确定要重置账户(".concat(e.name,")的密码吗？")).then(function(){l.a.resetPassword(e.id).then(function(e){t._success("已重置")})})}}},w=Object(u.a)(h,function(){var o=this,e=o.$createElement,l=o._self._c||e;return l("nm-container",[l("nm-list",o._b({ref:"list",scopedSlots:o._u([{key:"querybar",fn:function(){return[l("el-form-item",{attrs:{label:"用户名：",prop:"userName"}},[l("el-input",{attrs:{clearable:""},model:{value:o.list.model.userName,callback:function(e){o.$set(o.list.model,"userName",e)},expression:"list.model.userName"}})],1),l("el-form-item",{attrs:{label:"名称：",prop:"name"}},[l("el-input",{attrs:{clearable:""},model:{value:o.list.model.name,callback:function(e){o.$set(o.list.model,"name",e)},expression:"list.model.name"}})],1)]},proxy:!0},{key:"querybar-advanced",fn:function(){return[l("el-row",[l("el-col",{attrs:{span:20,offset:1}},[l("el-form-item",{attrs:{label:"手机号：",prop:"phone"}},[l("el-input",{attrs:{clearable:""},model:{value:o.list.model.phone,callback:function(e){o.$set(o.list.model,"phone",e)},expression:"list.model.phone"}})],1),l("el-form-item",{attrs:{label:"邮箱：",prop:"email"}},[l("el-input",{attrs:{clearable:""},model:{value:o.list.model.name,callback:function(e){o.$set(o.list.model,"name",e)},expression:"list.model.name"}})],1)],1)],1)]},proxy:!0},{key:"querybar-buttons",fn:function(e){var t=e.total;return[l("nm-button",{directives:[{name:"nm-has",rawName:"v-nm-has",value:o.buttons.add,expression:"buttons.add"}],attrs:{type:"success",text:"添加",icon:"add"},on:{click:function(e){return o.add(t)}}})]}},{key:"col-roles",fn:function(e){var n=e.row;return[n.roles&&0<n.roles.length?[o._l(n.roles,function(e,t){return[l("nm-button",{key:e.value,attrs:{type:"text",text:e.label}}),t<n.roles.length-1?[o._v("、")]:o._e()]})]:l("span",[o._v("未绑定")])]}},{key:"col-status",fn:function(e){var t=e.row;return[0===t.status?l("el-tag",{attrs:{type:"info"}},[o._v("未激活")]):1===t.status?l("el-tag",{attrs:{type:"success"}},[o._v("正常")]):2===t.status?l("el-tag",{attrs:{type:"warning"}},[o._v("禁用")]):3===t.status?l("el-tag",{attrs:{type:"danger"}},[o._v("注销")]):o._e()]}},{key:"col-loginTime",fn:function(e){var t=e.row;return[o._v(o._s(0===t.status?"未登录":t.loginTime))]}},{key:"col-loginIP",fn:function(e){var t=e.row;return[o._v(o._s(0===t.status?"未登录":t.loginIP))]}},{key:"col-operation",fn:function(e){var t=e.row;return[l("el-dropdown",{attrs:{trigger:"click"}},[l("span",{staticClass:"el-dropdown-link"},[o._v("\n          操作\n          "),l("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),l("el-dropdown-menu",{staticClass:"nm-list-operation-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[l("el-dropdown-item",[l("nm-button",{directives:[{name:"nm-has",rawName:"v-nm-has",value:o.buttons.edit,expression:"buttons.edit"}],attrs:{text:"编&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;辑",icon:"edit",type:"text"},on:{click:function(e){return o.edit(t)}}})],1),l("el-dropdown-item",[l("nm-button",{directives:[{name:"nm-has",rawName:"v-nm-has",value:o.buttons.resetPassword,expression:"buttons.resetPassword"}],attrs:{text:"重置密码",icon:"refresh",type:"text"},on:{click:function(e){return o.resetPassword(t)}}})],1),l("el-dropdown-item",[l("nm-button-delete",{directives:[{name:"nm-has",rawName:"v-nm-has",value:o.buttons.del,expression:"buttons.del"}],attrs:{disabled:t.id===o.accountId,text:"删&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;除",action:o.removeAction,id:t.id},on:{success:o.refresh}})],1)],1)],1)]}}])},"nm-list",o.list,!1)),l("add-page",{attrs:{visible:o.addPage.visible,sort:o.addPage.sort},on:{"update:visible":function(e){return o.$set(o.addPage,"visible",e)},success:o.refresh}}),l("edit-page",{attrs:{visible:o.editPage.visible,id:o.editPage.id},on:{"update:visible":function(e){return o.$set(o.editPage,"visible",e)},success:o.refresh}})],1)},[],!1,null,null,null);t.default=w.exports}}]);